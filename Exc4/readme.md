# Задание 4

## Стартовые условия

Задание 4. Проектирование продажи ОСАГО
- Компания планирует вскоре запустить новый продукт: оформление ОСАГО онлайн. 
- Пользовательский путь выглядит так: 
  - Клиенту предлагается заполнить заявку с информацией о своём автомобиле, после этого сервис запрашивает у всех доступных страховых компаний предложения с условиями страхования под заявку клиента. 
  - Бизнесу важно, чтобы на экране пользователя предложения от каждой страховой компании отображались сразу, как только от неё пришёл ответ. 
  - Максимальное время ожидания решения от страховой компании — 60 секунд. 
- Все страховые компании предоставляют однотипные REST API с двумя эндпоинтами:
  - Создать заявку на ОСАГО.
  - Получить предложение по заявке.
- Количество одновременных пользователей, создающих заявку на ОСАГО, может достигать 2,5 тысячи человек.

## Решение

- Для запроса предложений не нужно иметь БД.
- Оформленные заявки на ОСАГО будет считаться как и страховка, а следовательно передача данных по оформленным сделкам будет ins-comp-settlement.
- Для общения между core-app и osago-aggregator будем использовать kafka-у и асинхронное общение через ивенты.
- core-app и web будут общаться через rest.
- Использование kafka-и будет достаточно, чтобы обеспечить нужную отказоустойчивость.
  - Так как срок ожидания решения 60 секунд.

## Схема

- [Схема до](InsureTech_C4_сontainer-diagram_as_is.drawio)
- [Схема после](InsureTech_C4_сontainer-diagram_to_be.drawio)

